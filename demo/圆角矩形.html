<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>圆角矩形</title>
</head>
<body>
  <canvas id="canvas" style="border: 1px solid #aaa;"></canvas>
  <script>
    window.onload = function() {
      const canvas = document.getElementById('canvas');
      const cxt = canvas.getContext('2d');
      canvas.width = 800;
      canvas.height = 800;

      // drawRoundRect(cxt, 100, 100, 600, 500, 50);

      fillRoundRect(cxt, 150, 150, 500, 500, 10, '#bbada0');
      for(let i = 0; i < 4; i++) {
        for(let j = 0; j < 4; j++) {
          fillRoundRect(cxt, 170 + i * 120, 170 + j * 120, 100, 100, 6, "#ccc0b3");
        }
      }
    }

    // function drawRoundRect(cxt, x, y, width, height, radius) {
    //   cxt.save();
    //   cxt.translate(x, y);
    //   pathRoundRect(cxt, width, height, radius);
    //   cxt.strokeStyle = 'black';
    //   cxt.stroke();
    //   cxt.restore();
    // }

    function pathRoundRect(cxt, width, height, radius) {
      cxt.beginPath();
      cxt.arc(width - radius, height - radius, radius, 0, Math.PI / 2);
      cxt.lineTo(radius, height);
      cxt.arc(radius, height - radius, radius, Math.PI / 2, Math.PI);
      cxt.lineTo(0, radius);
      cxt.arc(radius, radius, radius, Math.PI, Math.PI * 3 / 2);
      cxt.lineTo(width - radius, 0);
      cxt.arc(width - radius, radius, radius, Math.PI * 3 / 2, Math.PI * 2);
      cxt.closePath();
    }

    function fillRoundRect(cxt, x, y, width, height, radius, fillColor = 'black') {
      if(2 * radius > width || 2 * radius > height) {
        return;
      }

      cxt.save();
      cxt.translate(x, y);
      pathRoundRect(cxt, width, height, radius);
      cxt.fillStyle = fillColor;
      cxt.fill();
      cxt.restore();
    }

    function strokeRoundRect(cxt, x, y, width, height, radius, lineWidth = 1, strokeColor = 'black') {
      if(2 * radius > width || 2 * radius > height) {
        return;
      }

      cxt.save();
      cxt.translate(x, y);
      pathRoundRect(cxt, width, height, radius);
      cxt.lineWidth = lineWidth;
      cxt.strokeStyle = strokeColor;
      cxt.stroke();
      cxt.restore();
    }
  </script>
</body>
</html>