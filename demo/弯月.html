<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>弯月</title>
</head>
<body>
  <canvas id="canvas" style="border: 1px solid #aaa;"></canvas>
  <script>
    window.onload = function() {
      const canvas = document.getElementById('canvas');
      const cxt = canvas.getContext('2d');
      canvas.width = 800;
      canvas.height = 800;

      // // 外层半圆
      // cxt.arc(400, 400, 300, 0.5 * Math.PI, 1.5 * Math.PI, true);
      // // 内层圆弧
      // cxt.moveTo(400, 100);
      // cxt.arcTo(1200, 400, 400, 700, (400 -100) * dis(400, 100, 1200, 400) / (1200 - 400));
      // cxt.stroke();

      fillMoon(cxt, 2, 400, 400, 300, 0);
    }

    // d: 控制点坐标的横坐标值
    function fillMoon(cxt, d, x, y, R, rot, fillColor = '#fb5') {
      cxt.save();
      cxt.translate(x, y);
      cxt.rotate(rot * Math.PI / 180);
      cxt.scale(R, R);
      pathMoon(cxt, d);
      cxt.fillStyle = fillColor;
      cxt.fill();
      cxt.restore();
    }

    // 以(0, 0) 点为圆心，1 为半径
    function pathMoon(cxt, d) {
      cxt.beginPath();
      cxt.arc(0, 0, 1, 0.5 * Math.PI, 1.5 * Math.PI, true);
      cxt.moveTo(0, -1);
      cxt.arcTo(d, 0, 0, 1, dis(0, -1, d, 0) / d);
      cxt.closePath();
    }

    function dis(x1, y1, x2, y2) {
      return Math.sqrt((x1 - x2) ** 2 + (y1 - y2) ** 2);
    }
  </script>
</body>
</html>